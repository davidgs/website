<!DOCTYPE html>
<html>
  <head>
    <style>
      {
          {
           partial "debugprint.css" | safeCSS
        }
      }
    </style>
    <title>I&#39;m an IoT Imp!</title>
    




  





  



<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />


<link rel="stylesheet" href="/css/bootstrap.min.css"/>
<link rel="stylesheet" href="/css/layouts/main.css"/>
<link rel="stylesheet" href="/css/style.css"/>
<link rel="stylesheet" href="/css/navigators/navbar.css"/>


<link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" />


<link rel="icon" type="image/png" href="/images/site/favicon_hu0b3af3b2695bc2a8e88d59b9721b8a18_8831_42x0_resize_box_2.png" />


<link rel="stylesheet" href="/css/style.css"/>

    
<meta name="description" content="I&#39;m an IoT Imp!" />
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css"
/>
<link rel="stylesheet" href="/css/layouts/single.css"/>
<link rel="stylesheet" href="/css/navigators/sidebar.css">


    
    
  </head>

  <body data-spy="scroll" data-target="#TableOfContents" data-offset="80">
    <div class="container-fluid bg-dimmed wrapper">
      
      
    





  



  





  





  



<nav class="navbar navbar-expand-xl top-navbar final-navbar shadow">
  <div class="container">
      <button class="navbar-toggler navbar-light" id="sidebar-toggler" type="button" onclick="toggleSidebar()">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="/">
      <img src="/images/site/main-logo_hu36e4c6c516043df4c5aad6d68b952eee_646582_42x0_resize_box_2.png">David G. Simmons</a>
    <button class="navbar-toggler navbar-light" id="toc-toggler" type="button" onclick="toggleTOC()">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse lang-selector" id="top-nav-items">
      <ul class="navbar-nav ml-auto">
      
      </ul>
    </div>
  </div>
  
  <img src="/images/site/main-logo_hu36e4c6c516043df4c5aad6d68b952eee_646582_42x0_resize_box_2.png" class="d-none" id="main-logo">
  <img src="/images/site/inverted-logo_hu527ca2c923a6347a00483834e2e3046d_608569_42x0_resize_box_2.png" class="d-none" id="inverted-logo">
</nav>



      
      
  <section class="sidebar-section" id="sidebar-section">
    <div class="sidebar-holder">
      <div class="sidebar" id="sidebar">
        <input type="text" value="" placeholder="Search" data-search="" id="search-box" />
        <div class="sidebar-tree">
          <ul class="tree" id="tree">
            <li id="list-heading"><a href="/posts" data-filter="all">Posts</a></li>
            <div class="subtree">
                
  
  
  
  
  
    
    <li><a class="" href="/posts/introduction/introduction/">Introduction</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/mad-skillz/mad-skillz/">Mad Skillz</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/beans/beans/">Coffee Beans</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/hobbies/">Hobbies</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/pranks/">Pranks</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/category/camunda/">Camunda</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/category/general/">General</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/category/programming/">Programming</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/category/dogs/">Dogs</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/category/database/">Databases</a></li>
  

  
  
  
  
  
    
    <li>
      <i class="fas fa-plus-circle"></i><a class="" href="/posts/category/iot/">IoT</a>
      
      <ul class="">
        
  
  
  
  
  
    
    <li><a class="" href="/posts/category/iot/iot-hardware/">Hardware</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/category/iot/iot-software/">Software</a></li>
  


      </ul>
    </li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/work/">Work</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/category/devrel/">DevRel</a></li>
  


            </div>
          </ul>
        </div>
      </div>
    </div>
  </section>


      
      
<section class="content-section" id="content-section">
  <div class="content">
    <div class="container p-0 read-area">
      
      
      
        
        
        
        
        






























&#34;https://davidgs.com/posts/category/iot/iot-hardware/images/IMG_1554.jpg&#34;








        <div class="hero-area col-sm-12" id="hero-area" style='background-image: url(https://davidgs.com/posts/category/iot/iot-hardware/images/IMG_1554.jpg);'>
      </div>
      


      
      <div class="page-content">
        <div class="author-profile ml-auto align-self-lg-center">
          <img class="rounded-circle" src='/images/author/dg3.png'/>
          <h5 class="author-name">David G. Simmons</h5>
          <p>November 24, 2014</p>
        </div>

        <div class="title">
          <h1>I&#39;m an IoT Imp!</h1>
        </div>

        <div class="post-content" id="post-content">


          <p>I got my <a href="http://electricimp.com/">electric imp</a> and imp breakout board from <a href="http://www.sparkfun.com">SparkFun</a> last week, and I decided to check it out today and see what I could do with it in an hour. I&rsquo;m re-stocking my Internet of Things (IoT) bag of tricks, and this is the first device I&rsquo;ve gotten in a while, so here&rsquo;s how <strong>that</strong> went.</p>
<p>Of course I have the requisite unpacking porn.</p>
<p><img src="/posts/category/iot/iot-hardware/images/IMG_1536.jpg" alt="IMG 1536">
<img src="/posts/category/iot/iot-hardware/images/IMG_1537.jpg" alt="IMG 1537">
<img src="/posts/category/iot/iot-hardware/images/IMG_1543.jpg" alt="IMG 1543"></p>
<p>It’s actually a pretty nice bit of kit, with a <a href="http://www.arm.com/products/processors/cortex-m/cortex-m3.php">Cortex M3</a> stuffed into a SSD Memory Card form factor. With WiFi included. That’s an awful lot stuffed into a very small package! I got to bust out my soldering iron and poke through my various boxes of parts and put some things together in order to get my hands dirty with the imp.</p>
<p>I will say that the mechanism for getting the WiFi configuration onto this device is … well, non-traditional. It has a small light sensor on the front edge, and you use your iPhone (or Android) phone to ‘flash’ the configuration. And by flash, I <strong>do</strong> mean <em>flash</em>. As in you enter your WiFi configuration into your phone, and then it literally flashes the display while you hold the Imp up to it. Needless to say, this mechanism is a bit imprecise. It took me a good 20 minutes and a number of tries before I managed to get it configured.</p>
<p>Once configured, I used the web-based development system (that is pretty nice) to extend one of the example programs. An interesting thing about the imp is that you can program on-device code as well as code to run in their cloud which you can access, and which will then interact with your device. So, as a first go, I pulled out some 300Ω resistors a couple of LEDs (a red one and a white one) and a bread-board. Here’s what I ended up with:</p>
<p><img src="/posts/category/iot/iot-hardware/images/IMG_1554.jpg" alt="IMG 1554"></p>
<p>Yeah, I had to use a wire as a jumper. I can’t find any of my real jumpers. So sue me.</p>
<p>I modified the simple example program &ndash; and the hardware example &ndash; for fun. One interesting feature of the electric imp platform is that you can write code to execute on the device as well as separate code to run in the electric imp cloud.</p>
<p> </p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">// create global variables for red and white LEDs on pins 7 and 9
</span><span style="color:#75715e"></span>whiteLed <span style="color:#f92672">&lt;-</span> hardware.pin9;
redLed <span style="color:#f92672">&lt;-</span> hardware.pin7;

<span style="color:#75715e">// configure leds to be a digital output
</span><span style="color:#75715e">//add some logging stuff too.
</span><span style="color:#75715e"></span>whiteLed.configure(DIGITAL_OUT);
redLed.configure(DIGITAL_OUT);
server.log(<span style="color:#e6db74">&#34;White LED OFF!&#34;</span>);
whiteLed.write(<span style="color:#ae81ff">0</span>);
server.log(<span style="color:#e6db74">&#34;Red LED OFF!&#34;</span>);
redLed.write(<span style="color:#ae81ff">0</span>);

<span style="color:#75715e">// function to turn White LED on or off
</span><span style="color:#75715e"></span>function <span style="color:#a6e22e">setWhiteLed</span>(ledState) {
  server.log(<span style="color:#e6db74">&#34;Set White LED: &#34;</span> <span style="color:#f92672">+</span> ledState);
  whiteLed.write(ledState);
}

<span style="color:#75715e">// function to turn Red LED on or off
</span><span style="color:#75715e"></span>function <span style="color:#a6e22e">setRedLed</span>(ledState) {
  server.log(<span style="color:#e6db74">&#34;Set Red LED: &#34;</span> <span style="color:#f92672">+</span> ledState);
  redLed.write(ledState);
}

<span style="color:#75715e">// register a handler for white &#34;led&#34; messages from the agent
</span><span style="color:#75715e"></span>agent.on(<span style="color:#e6db74">&#34;whiteLed&#34;</span>, setWhiteLed);

<span style="color:#75715e">// register handler for red LED messages from agent
</span><span style="color:#75715e"></span>agent.on(<span style="color:#e6db74">&#34;redLed&#34;</span>, setRedLed);
</code></pre></div><p>It&rsquo;s pretty straight forward to write code for this device.  I also modified one of the sample programs to run in the electric imp cloud:</p>
<p> ```cpp
// Log the URLs we need
server.log(&ldquo;Turn White LED On: &quot; + http.agenturl() + &ldquo;?whiteLed=1&rdquo;);
server.log(&ldquo;Turn White LED Off: &quot; + http.agenturl() + &ldquo;?whiteLed=0&rdquo;);
server.log(&ldquo;Turn Red LED On: &quot; + http.agenturl() + &ldquo;?redLed=1&rdquo;);
server.log(&ldquo;Turn Red LED Off: &quot; + http.agenturl() + &ldquo;redLed=0&rdquo;);</p>
<p>function requestHandler(request, response) {
try {
// check if the user sent whiteLed as a query parameter
if (&ldquo;whiteLed&rdquo; in request.query ) {</p>
<pre><code>  // if they did, and led=1.. set our variable to 1
  if (request.query.whiteLed == &quot;1&quot; || request.query.whiteLed == &quot;0&quot;) {
    // convert the led query parameter to an integer
    local whiteState = request.query.whiteLed.tointeger();
    // send &quot;whiteLed&quot; message to device, and send ledState as the data
    device.send(&quot;whiteLed&quot;, whiteState);
  }
}
// do the same thing for the red LED
if(&quot;redLed&quot; in request.query){
  if (request.query.redLed == &quot;1&quot; || request.query.redLed == &quot;0&quot;) {
    local redState = request.query.redLed.tointeger();
    device.send(&quot;redLed&quot;, redState);
  }
}
// send a response back saying everything was OK.
response.send(200, &quot;OK&quot;);
</code></pre>
<p>} catch (ex) {
response.send(500, &ldquo;Internal Server Error: &quot; + ex);
}
}</p>
<p>// register the HTTP handler
http.onrequest(requestHandler);</p>
<pre><code>
Those `server.log()` calls at the front are actually fairly important as they print out to the console of the web IDE the actual secure URLs for accessing the service in the electric imp cloud. And the reaction from the device is near-instantaneous. Very impressive response time!

Now, all I have to do next is find some more interesting sensors -- I have boxes and boxes of them lying around here -- and then get to doing something interesting. As I said, this was a quick hour or so of playing around just to see how easy it would be to actually **do** something interesting with this device. Now that I know that it is, indeed, fairly easy to do, I think I'll give some thought to it and set about actually doing something more interesting than simply turning on and off some LEDs.

I'll get back to you on how that works. Feel free to send suggestions of what I might do that would be at least mildly interesting.
</code></pre>
        
        

        
        
        
        


        


        
        
        
        
        
        
          
        
        
        </div>

        
        
          <div class="btn-improve-page">
              <a href="https://github.com/davidgs/website/edit//content/posts/category/iot/iot-hardware/im-an-iot-imp.md">
                <i class="fas fa-code-branch"></i>
                Improve this page
              </a>
          </div>
        

        
      <hr />
        <div class="row next-prev-navigator">


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
      
      <div class="col-md-6 previous-article">
        <a href="/posts/category/iot/what-is-and-isnt-iot/" class="btn btn-outline-info">
          <span><i class="fas fa-chevron-circle-left"></i> Prev</span>
          <br />
          <span>What is, and isn&#39;t, IoT</span>
        </a>
      </div>
      
    
    
      
        
        
          
              
          
        
        <div class="col-md-6 next-article">
          <a href="/posts/category/iot/whos-going-to-drive-iot-innovation/" class="btn btn-outline-info">
            <span>Next <i class="fas fa-chevron-circle-right"></i></span>
            <br />
            <span>Who&#39;s Going to Drive IoT Innovation</span>
          </a>
        </div>
      
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

</div>

      <hr />
      
      
      </div>
    </div>
  </div>
  
</section>


      
      
  <section class="toc-section" id="toc-section">
    
    <div class="toc-holder">
      <h5 class="text-center pl-3">Table of Contents</h5>
      <hr>
      <div class="toc">
        <nav id="TableOfContents"></nav>
      </div>
    </div>
    
  </section>

    </div>

    

  




  




  
  
    
  









  







<footer class="container-fluid text-center align-content-center footer pb-2">
  <div class="container pt-5">
    <div class="row text-left">
      <div class="col-md-4 col-sm-12">
        <h5>Navigation</h5>
        
        <ul>
            
              
              
                
              
              <li class="nav-item">
                <a class="smooth-scroll" href="#about">About</a>
              </li>
            
            
              
              
                
              
              <li class="nav-item">
                <a class="smooth-scroll" href="#skills">Skills</a>
              </li>
            
            
              
              
                
              
              <li class="nav-item">
                <a class="smooth-scroll" href="#experiences">Experience</a>
              </li>
            
            
              
              
                
              
              <li class="nav-item">
                <a class="smooth-scroll" href="#education">Education</a>
              </li>
            
            
              
              
                
              
              <li class="nav-item">
                <a class="smooth-scroll" href="#projects">Projects</a>
              </li>
            
            
              
              
                
              
              <li class="nav-item">
                <a class="smooth-scroll" href="#recent-posts">Recent Posts</a>
              </li>
            
        </ul>
        

      </div>
      
      <div class="col-md-4 col-sm-12">
        <h5>Contact me:</h5>
        <ul>
          
          <li><span>Email: </span> <span>davidgs@davidgs.com</span></li>
          
          <li><span>Phone: </span> <span>&#43;1 (919) 534-5099</span></li>
          
        </ul>
      </div>
      
      
      <div class="col-md-4 col-sm-12">
        
        <p>Stay up to date with email notification</p>
        <form>
          <div class="form-group">
            <input
              type="email"
              class="form-control"
              id="exampleInputEmail1"
              aria-describedby="emailHelp"
              placeholder="Enter email"
            />
            <small id="emailHelp" class="form-text text-muted"
              >We&#39;ll never share your email with anyone else.</small
            >
          </div>
          <button type="submit" class="btn btn-info">Submit</button>
        </form>
      </div>
      
    </div>
  </div>
  <hr />
  <div class="container">
    <div class="row text-left">
      <div class="col-md-4">
        <a id="theme" href="https://github.com/hossainemruz/toha" target="#">
          <img src="/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_2.png">
          Toha
        </a>
      </div>
      <div class="col-md-4 text-center">© 2020 Copyright.</div>
      <div class="col-md-4 text-right">
        <a id="hugo" href="https://gohugo.io/">Powered by
        <img
          src="/images/hugo-logo.svg"
          alt="Hugo Logo"
          height="18"
        />
        </a>
      </div>
    </div>
  </div>
</footer>

    <script src="/js/jquery-3.4.1.min.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>

<script src="/js/navbar.js"></script>
<script src="/js/main.js"></script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
<script src="/js/single.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>



    
    
<script type="text/javascript">
  var sc_project = 4739013;
  var sc_invisible = 0;
  var sc_security = "3147012e";
  var scJsHost = "https://";
  document.write("<sc" + "ript type='text/javascript' src='" +
    scJsHost +
    "statcounter.com/counter/counter.js'></" + "script>");
</script>
<noscript>
  <div class="statcounter"><a title="Web Analytics
Made Easy - StatCounter" href="https://statcounter.com/" target="_blank"><img class="statcounter"
        src="https://c.statcounter.com/4739013/0/3147012e/0/" alt="Web Analytics Made Easy -
StatCounter"></a></div>
</noscript>

  </body>
</html>
